{"version":3,"sources":["components/Navigation.js","components/MainContainer.js","components/RandomArticles.js","components/colors.js","components/Button.js","components/ArticleViewer.js","utils/fetchRandomArticles.js","utils/fetchArticle.js","App.js","serviceWorker.js","index.js"],"names":["StyledNavigation","styled","nav","_templateObject","StyledNavigationButton","button","_templateObject2","NavigationButton","props","react_default","a","createElement","active","value","Navigation","onClick","handleReload","MainContainer","div","MainContainer_templateObject","StyledArticle","RandomArticles_templateObject","ArticleDescription","extract","ArticleImage","image","src","alt","RandomArticle","handleOpenArticle","title","RandomArticles","randomArticles","map","randomArticle","Object","assign","key","pageid","url","outsideUrl","randomArticlesError","components_MainContainer","ref","randomArticlesRef","onScroll","handleRandomArticlesScroll","colors","buttonBackground","StyledButton","Button_templateObject","Button","ArticleViewerHeader","ArticleViewer_templateObject","StyledArticleViewerBody","iframe","ArticleViewer_templateObject2","StyledArticleViewerContainer","_templateObject3","StyledTopLeftButton","_templateObject4","StyledTopRightButton","_templateObject5","StyledLoading","h1","_templateObject6","Loading","ArticleViewer","loading","articleIsLoading","href","openArticle","target","rel","components_Button","handleCloseArticle","iframeRef","queryJSON","action","format","prop","generator","exchars","exlimit","exintro","explaintext","pithumbsize","pilimit","grnnamespace","grnlimit","origin","fetchRandomArticles","Promise","resolve","reject","fetch","obj","result","keys","forEach","queryKey","createAPIurl","then","response","ok","json","Error","fetchedData","error","articles","query","pages","articleDataId","push","thumbnail","source","catch","fetchArticle","text","article","DOMParser","parseFromString","GlobalStyles","createGlobalStyle","App_templateObject","App","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","randomArticlesLoading","randomArticlesScrollDistance","React","createRef","bind","assertThisInitialized","handleFetchRandomArticles","_this2","setState","concat","e","scrollHeight","scrollTop","clientHeight","_this3","current","fetchedArticle","contentDocument","open","write","documentElement","innerHTML","close","addEventListener","style","height","toString","_this4","mainSection","components_ArticleViewer","components_RandomArticles","Fragment","dist","components_Navigation","Component","Boolean","window","location","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.44cd7dcf.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n\nconst StyledNavigation = styled.nav`\nbackground: black;\ndisplay: flex;\njustify-content: space-between;\nalign-items: center;\nposition: sticky;\ntop: 0;\npadding: 0 1rem;\nheight: 4rem;\n\ndiv {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n}\n\np {\n\tcolor: white;\n\tline-height: 1em;\n\tpadding: 0 1em;\n\tmargin: 0;\n\ttext-align: center;\n\ttext-decoration: none;\n\tfont-size: 1.5em;\n}\n\n`;\n\nconst StyledNavigationButton = styled.button`\n\tbackground: black;\n\tborder: none;\n\tcolor: white;\n\tfont-size: 1em;\n\tline-height: 3em;\n\tpadding: 0.5em 1em;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcursor: pointer;\n\t:hover {\n\t\tbackground-color: white;\n\t\tcolor: black;\n\t}\t\n`;\n\nfunction NavigationButton(props){\n\treturn (\n\t\t<StyledNavigationButton active={props.active}>\n\t\t\t{props.value}\n\t\t</StyledNavigationButton>\n\t);\n}\n\nfunction Navigation(props){\n\treturn (\n\t\t<StyledNavigation {...props}>\n\t\t\t<div>\n\t\t\t\t<p>\n\t\t\t\t\tWiki Viewer\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div onClick={props.handleReload}>\n\t\t\t\t<NavigationButton value=\"New Articles\" />\n\t\t\t</div>\n\t\t</StyledNavigation>\n\t);\n}\n\nexport default Navigation;","import styled from 'styled-components';\n\nconst MainContainer = styled.div`\nmax-width: 1000px;\nmargin: 0 auto;\nwidth: 100%;\ntext-align: center;\noverflow-y: scroll;\n-webkit-overflow-scrolling: touch;\nheight: calc(100vh - 5rem);\npadding: 0;\n`;\n\nexport default MainContainer;","import React from 'react';\nimport styled from 'styled-components';\nimport MainContainer from \"./MainContainer\"\n\n\nconst StyledArticle = styled.div`\nbackground: white;\nbox-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);\npadding: 1em;\nmargin: 1em 0;\noverflow: auto;\ndiv {\n\tcursor: pointer;\n}\nh1{\n\tfont-size: 1.5rem;\n}\n\np {\n\tpadding 0;\n\ttext-align: justify;\n}\n\nimg {\n\tmargin-right: 1em;\n\tfloat: left;\n\tclear: left;\n}\n`;\n\nfunction ArticleDescription(props){\n\treturn (\n\t\t<p>\n\t\t{props.extract}\n\t\t</p>\n\t\t);\n}\n\nfunction ArticleImage(props){\n\tif(props.image){\n\t\treturn (\n\t\t\t<img src={props.image} alt=\"\"/>\n\t\t\t);\n\t}\n\treturn null;\n}\n\nfunction RandomArticle(props){\n\treturn (\n\t\t<StyledArticle >\n\t\t\t<div onClick={()=>props.handleOpenArticle(props)}>\n\t\t\t\t<ArticleImage image={props.image}/>\n\t\t\t\t<h1>{props.title}</h1>\n\t\t\t\t<ArticleDescription extract={props.extract}/>\n\t\t\t</div>\n\t\t</StyledArticle>\n\t);\n}\n\n\nfunction RandomArticles (props){\n\tlet randomArticles = props.randomArticles.map(randomArticle => {\n\t\treturn(\n\t\t\t<RandomArticle \n\t\t\tkey={randomArticle.pageid}\n\t\t\tpageid={randomArticle.pageid}\n\t\t\ttitle={randomArticle.title} \n\t\t\textract={randomArticle.extract}\n\t\t\timage={randomArticle.image}\n\t\t\turl={randomArticle.url}\n\t\t\toutsideUrl={randomArticle.outsideUrl}\n\t\t\t{...props}\n\t\t\t/>\n\t\t);\n\t});\n\n\tif(props.randomArticlesError){\n\t\treturn(\n\t\t\t<MainContainer \n\t\t\tref={props.randomArticlesRef}\n\t\t\t>\n\t\t\t\t<h1>Error loading...</h1>\n\t\t\t\t<h1>Try again later</h1>\n\t\t\t</MainContainer>\n\t\t);\n\t} else {\n\t\treturn(\n\t\t\t<MainContainer \n\t\t\tref={props.randomArticlesRef} \n\t\t\tonScroll={props.handleRandomArticlesScroll} \n\t\t\t{...props}\n\t\t\t>\n\t\t\t\t{randomArticles}\n\t\t\t\t<h1>Loading...</h1>\n\t\t\t</MainContainer>\n\t\t);\n\t}\n}\n\nexport default RandomArticles;","\nconst buttonBackground = \"#7F7F7F\";\n\nexport default {\n\tbuttonBackground\n}","import React from 'react';\nimport styled from 'styled-components';\nimport colors from './colors'\n\nconst StyledButton = styled.div`\n\tbackground: ${colors.buttonBackground};\n\tborder: none;\n\tborder-radius: 1em\n\tcolor: white;\n\tbox-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);\n\tpadding: 0 1em;\n\tline-height: 2.5em;\n\ttext-align: center;\n\ttext-decoration: none;\n\tfont-size: 1em;\n\n\t:hover {\n\t\tbackground: white;\n\t\tcolor: black;\n\t}\n\t:active {\n\t\tbackground: ${colors.active};\n\t\tcolor: white;\n\t}\n\n`;\n\nfunction Button(props){\n\treturn (\n\t\t<StyledButton>{props.value}</StyledButton>\n\t);\n}\n\nexport default Button;","import React from 'react';\nimport styled from 'styled-components';\nimport Button from \"./Button\";\n\nconst ArticleViewerHeader = styled.div`\n\tpadding: 0.5em 1em 3em 1em;\n\tposition: sticky;\n\ttop: 0;\n`;\n\nconst StyledArticleViewerBody = styled.iframe`\n\tbox-sizing: border-box;\n  \tborder: none;\n  \tmargin: 0;\n  \tpadding: 0;\n  \twidth: 100%;\n  \theight: 250px;\n`;\n\nconst StyledArticleViewerContainer = styled.div`\nmargin: 0 auto;\nwidth: 100%;\noverflow-y: scroll;\n-webkit-overflow-scrolling: touch;\nheight: calc(100vh - 4rem);\n`;\n\n\nconst StyledTopLeftButton = styled.div`\nfloat: left;\na {\n\ttext-decoration: none;\n}\n`;\n\nconst StyledTopRightButton = styled.div`\nfloat: right;\n`;\n\nconst StyledLoading = styled.h1`\nfont-size: 1.5rem; \ntext-align: center;\n`;\nfunction Loading(props){\n\treturn(\n\t\t<StyledLoading>\n\t\t\tLoading...\n\t\t</StyledLoading>\n\t);\n}\n\nfunction ArticleViewer(props) {\n\tlet loading = props.articleIsLoading ? <Loading />: null;\n\treturn(\n\t\t<StyledArticleViewerContainer {...props}>\n\t\t\t<ArticleViewerHeader {...props}>\n\t\t\t\t<StyledTopLeftButton>\n\t\t\t\t\t<a href={props.openArticle.outsideUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n\t\t\t\t\t\t<Button value=\"Open on Wikipedia\"/>\n\t\t\t\t\t</a>\n\t\t\t\t</StyledTopLeftButton>\n\t\t\t\t<StyledTopRightButton onClick={props.handleCloseArticle}>\n\t\t\t\t\t<Button value=\"&times;\" />\n\t\t\t\t</StyledTopRightButton>\n\t\t\t</ArticleViewerHeader>\n\t\t\t{loading}\n\t\t\t{/*eslint-disable-next-line*/}\n\t\t\t<StyledArticleViewerBody title=\"open-article\" ref={props.iframeRef} src=\"javascript:void(0);\"/>\n\t\t</StyledArticleViewerContainer>\n\t);\n}\n\n\nexport default ArticleViewer;","const queryJSON = {\n\t\"action\": \"query\",\n\t\"format\": \"json\",\n\t\"prop\": \"extracts|pageimages\",\n\t\"generator\": \"random\",\n\t\"exchars\": \"500\",\n\t\"exlimit\": \"12\",\n\t\"exintro\": 1,\n\t\"explaintext\": 1,\n\t\"pithumbsize\": \"200\",\n\t\"pilimit\": \"12\",\n\t\"grnnamespace\": \"0\",\n\t\"grnlimit\": \"12\",\n\t\"origin\": \"*\"\n};\n\nfunction createAPIurl(obj){\n\tvar result = \"https://en.wikipedia.org/w/api.php?\";\n\tObject.keys(obj).forEach(function(queryKey){\n\t\tresult += \"&\" + queryKey + \"=\" + obj[queryKey];\n\t});\n\treturn result;\n}\n\n\nfunction fetchRandomArticles(){\n\treturn new Promise((resolve, reject)=> {\n\t\tfetch(createAPIurl(queryJSON))\n\t\t.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.json();\n\t\t\t} else {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t})\n\t\t.then(fetchedData => {\n\t\t\tlet result = {\n\t\t\t\terror: false,\n\t\t\t\tarticles: [],\n\t\t\t};\n\t\t\tObject.keys(fetchedData.query.pages).forEach(articleDataId =>{\n\t\t\t\tresult.articles.push({\n\t\t\t\t\tpageid: articleDataId,\n\t\t\t\t\ttitle: fetchedData.query.pages[articleDataId].title,\n\t\t\t\t\timage: fetchedData.query.pages[articleDataId].thumbnail ?\n\t\t\t\t\t\tfetchedData.query.pages[articleDataId].thumbnail.source : null,\n\t\t\t\t\textract: fetchedData.query.pages[articleDataId].extract,\n\t\t\t\t\turl: \"https://en.wikipedia.org/api/rest_v1/page/mobile-html/\" +\n\t\t\t\t\t\tfetchedData.query.pages[articleDataId].title,\n\t\t\t\t\toutsideUrl: \"https://en.wikipedia.org/wiki/\" +\n\t\t\t\t\t\tfetchedData.query.pages[articleDataId].title,\n\t\t\t\t});\n\t\t\t});\n\t\t\tresolve(result);\n\t\t})\n\t\t.catch(error => {\n\t\t\treject({error: error});\n\t\t});\n\t});\n}\n\nexport default fetchRandomArticles;","function fetchArticle(url){\n\treturn new Promise((resolve, reject) => {\n\t\tfetch(url)\n\t\t.then(response => {\n\t\t\tif (response.ok) {\n\t\t\t\treturn response.text();\n\t\t\t} else {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t})\n\t\t.then(fetchedData => {\n\t\t\tlet result = {\n\t\t\t\terror: false,\n\t\t\t\tarticle: new DOMParser().parseFromString(fetchedData, \"text/html\"),\n\t\t\t} \n\t\t\tresolve(result);\n\t\t}).catch(error => {\n\t\t\treject({error: error});\n\t\t});\n\t});\n}\nexport default fetchArticle;","import React from 'react';\nimport { createGlobalStyle } from 'styled-components';\nimport { Normalize } from 'styled-normalize';\nimport Navigation from './components/Navigation';\nimport RandomArticles from './components/RandomArticles';\nimport ArticleViewer from './components/ArticleViewer';\nimport fetchRandomArticles from \"./utils/fetchRandomArticles\";\nimport fetchArticle from \"./utils/fetchArticle\";\n\n\nconst GlobalStyles = createGlobalStyle`\n html, body {\n   box-sizing: border-box;\n   height: 100%;\n   font-family: Verdana, sans-serif;\n   font-size: 16px;\n   line-height: 1.5;\n   background: #E5E5E5\n}\n\n *,\n *::before,\n *::after {\n   box-sizing: inherit;\n}\n`;\n\nclass App extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      randomArticles: [],\n      randomArticlesLoading: false,\n      randomArticlesError: false,\n      randomArticlesScrollDistance: 0,\n      openArticle: false,\n      articleIsLoading: false,\n    }\n    this.iframeRef = React.createRef();\n    this.randomArticlesRef = React.createRef();\n    this.handleOpenArticle = this.handleOpenArticle.bind(this);\n    this.handleCloseArticle = this.handleCloseArticle.bind(this);\n    this.handleFetchRandomArticles = this.handleFetchRandomArticles.bind(this);\n    this.handleRandomArticlesScroll = this.handleRandomArticlesScroll.bind(this);\n    this.handleReload = this.handleReload.bind(this);\n  }\n\n  handleFetchRandomArticles(){\n    this.setState({randomArticlesLoading: true});\n    fetchRandomArticles().then((randomArticles) =>{\n      this.setState({\n        randomArticles: this.state.randomArticles.concat(randomArticles.articles),\n        randomArticlesLoading: false\n      });\n    }).catch(error => {\n       this.setState({\n        randomArticles: [],\n        randomArticlesError: error.error,\n        randomArticlesLoading: false,\n      });\n    })\n  }\n\n  handleRandomArticlesScroll(e){\n    if (((e.target.scrollHeight - e.target.scrollTop) * 0.8 <= e.target.clientHeight) &&\n      this.state.randomArticlesLoading === false){\n        this.handleFetchRandomArticles();\n    }\n  }\n\n  handleOpenArticle(props){\n    this.setState({\n      randomArticlesScrollDistance: this.randomArticlesRef.current.scrollTop,\n      openArticle: props,\n      articleIsLoading: true\n    });\n    this.setState({openArticle: props, articleIsLoading: true}, ()=>{\n      fetchArticle(props.url).then(fetchedArticle => {\n        this.iframeRef.current.contentDocument.open();\n        this.iframeRef.current.contentDocument.write(fetchedArticle.article.documentElement.innerHTML);\n        this.iframeRef.current.contentDocument.close();\n        this.iframeRef.current.contentDocument.addEventListener(\"DOMContentLoaded\", () =>{\n          this.iframeRef.current.style.height = this.iframeRef.current.contentDocument.documentElement.scrollHeight.toString() + \"px\";\n        });\n        this.setState({articleIsLoading: false});\n      });\n    });\n  }\n\n  handleCloseArticle(){\n    this.setState({openArticle: false}, () =>{\n      this.randomArticlesRef.current.scrollTop = this.state.randomArticlesScrollDistance;\n    });\n  }\n  handleReload(){\n    this.setState({randomArticles: []});\n    this.handleFetchRandomArticles();\n  }\n\n  componentDidMount(){\n    this.handleFetchRandomArticles();\n    this.randomArticlesRef.current.scrollTop = this.state.randomArticlesScrollDistance;\n  }\n\n  render() {\n    let mainSection;\n    if(this.state.openArticle){\n      mainSection = (\n        <ArticleViewer \n        iframeRef={this.iframeRef}\n        articleIsLoading={this.state.articleIsLoading}\n        handleCloseArticle={this.handleCloseArticle}\n        openArticle={this.state.openArticle}\n        />\n        );\n    } else {\n      mainSection = (\n        <RandomArticles \n        randomArticles={this.state.randomArticles}\n        randomArticlesError={this.state.randomArticlesError}\n        randomArticlesRef={this.randomArticlesRef}\n        handleFetchRandomArticles={this.handleFetchRandomArticles}\n        handleRandomArticlesScroll={this.handleRandomArticlesScroll}\n        handleOpenArticle={this.handleOpenArticle}\n        />\n        );\n    }\n    return (\n      <React.Fragment>\n        <Normalize />\n        <GlobalStyles />\n        <Navigation handleReload={this.handleReload} />\n        {mainSection}  \n      </React.Fragment>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}